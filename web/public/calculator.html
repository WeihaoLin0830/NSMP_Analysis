<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A√±adir Paciente - NSMP Analysis</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/calculator.css">
    <link rel="stylesheet" href="css/chatbox.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-logo">
                <img src="cinta_purpura.png" alt="Logo" class="nav-logo-img">
                NSMP Analysis
            </a>
            <ul class="nav-links">
                <li><a href="/">Inicio</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Form Section -->
        <section class="form-section" id="formSection">
            <div class="form-header">
                <h1>‚ûï A√±adir Nuevo Paciente</h1>
                <p>Complete la siguiente informaci√≥n para generar el perfil de riesgo y an√°lisis de supervivencia</p>
                <p class="form-note">Los campos marcados con <span class="required-mark">*</span> son obligatorios. Deje en blanco si desconoce el valor.</p>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <p class="progress-text" id="progressText">0% completado</p>
            </div>

            <form id="profileForm" class="card">
                <!-- Section: Variables Num√©ricas -->
                <div class="form-section-title">
                    <span class="section-icon">üìä</span>
                    Variables Num√©ricas
                </div>

                <div class="form-grid">
                    <!-- Edad en cirug√≠a -->
                    <div class="form-group">
                        <label for="edad_en_cirugia">Edad en cirug√≠a (a√±os) <span class="required-mark">*</span></label>
                        <input 
                            type="number" 
                            id="edad_en_cirugia" 
                            name="edad_en_cirugia" 
                            min="18" 
                            max="100" 
                            step="1"
                            placeholder="Ej: 58"
                            required
                        >
                    </div>

                    <!-- IMC -->
                    <div class="form-group">
                        <label for="imc">√çndice de Masa Corporal (IMC)</label>
                        <input 
                            type="text" 
                            id="imc" 
                            name="imc" 
                            placeholder="Ej: 28.5 (o dejar vac√≠o)"
                            data-median="30.20"
                        >
                        <small class="field-hint">IMC = peso (kg) / altura¬≤ (m¬≤). Si no lo sabe, d√©jelo vac√≠o.</small>
                    </div>

                    <!-- Valor CA125 -->
                    <div class="form-group">
                        <label for="valor_de_ca125">Valor de CA125 (U/mL)</label>
                        <input 
                            type="text" 
                            id="valor_de_ca125" 
                            name="valor_de_ca125" 
                            placeholder="Ej: 15.4 (o dejar vac√≠o)"
                            data-median="3.23"
                        >
                        <small class="field-hint">Marcador tumoral. Si no lo sabe, d√©jelo vac√≠o.</small>
                    </div>

                    <!-- Tama√±o tumoral -->
                    <div class="form-group">
                        <label for="tamano_tumoral">Tama√±o tumoral (cm)</label>
                        <input 
                            type="text" 
                            id="tamano_tumoral" 
                            name="tamano_tumoral" 
                            placeholder="Ej: 2.5 (o dejar vac√≠o)"
                            data-median="1.39"
                        >
                        <small class="field-hint">Tama√±o del tumor en cent√≠metros.</small>
                    </div>

                    <!-- Receptor Estr√≥geno -->
                    <div class="form-group">
                        <label for="recep_est_porcent">Receptores de Estr√≥geno (%)</label>
                        <input 
                            type="text" 
                            id="recep_est_porcent" 
                            name="recep_est_porcent" 
                            placeholder="Ej: 90 (o dejar vac√≠o)"
                            data-median="0.90"
                        >
                        <small class="field-hint">Porcentaje de expresi√≥n (0-100 o 0-1).</small>
                    </div>

                    <!-- Receptor Progesterona -->
                    <div class="form-group">
                        <label for="rece_de_Ppor">Receptores de Progesterona (%)</label>
                        <input 
                            type="text" 
                            id="rece_de_Ppor" 
                            name="rece_de_Ppor" 
                            placeholder="Ej: 85 (o dejar vac√≠o)"
                            data-median="0.80"
                        >
                        <small class="field-hint">Porcentaje de expresi√≥n (0-100 o 0-1).</small>
                    </div>
                </div>

                <!-- Section: Variables Categ√≥ricas -->
                <div class="form-section-title">
                    <span class="section-icon">üìã</span>
                    Variables Cl√≠nicas
                </div>

                <div class="form-grid">
                    <!-- ASA -->
                    <div class="form-group">
                        <label for="asa">Clasificaci√≥n ASA</label>
                        <select id="asa" name="asa">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="0">0 - ASA I</option>
                            <option value="1">1 - ASA II</option>
                            <option value="2">2 - ASA III</option>
                            <option value="3">3 - ASA IV</option>
                            <option value="4">4 - ASA V</option>
                            <option value="5">5 - ASA VI</option>
                            <option value="6">6 - Desconocido</option>
                        </select>
                    </div>

                    <!-- Histolog√≠a definitiva -->
                    <div class="form-group">
                        <label for="histo_defin">Histolog√≠a definitiva</label>
                        <select id="histo_defin" name="histo_defin">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="1">1 - Hiperplasia con atipias</option>
                            <option value="2">2 - Carcinoma endometrioide</option>
                            <option value="3">3 - Carcinoma seroso</option>
                            <option value="4">4 - Carcinoma de c√©lulas claras</option>
                            <option value="5">5 - Carcinoma indiferenciado</option>
                            <option value="6">6 - Carcinoma mixto</option>
                            <option value="7">7 - Carcinoma escamoso</option>
                            <option value="8">8 - Carcinosarcoma</option>
                            <option value="9">9 - Otros</option>
                        </select>
                    </div>

                    <!-- Grado histol√≥gico -->
                    <div class="form-group">
                        <label for="grado_histologi">Grado histol√≥gico</label>
                        <select id="grado_histologi" name="grado_histologi">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="1">Grado 1 - Bajo grado (G1-G2)</option>
                            <option value="2">Grado 2 - Alto grado (G3)</option>
                        </select>
                    </div>

                    <!-- FIGO 2023 -->
                    <div class="form-group">
                        <label for="FIGO2023">Estadio FIGO 2023</label>
                        <select id="FIGO2023" name="FIGO2023">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="1">1 - IA1</option>
                            <option value="2">2 - IA2</option>
                            <option value="3">3 - IA3</option>
                            <option value="4">4 - IB</option>
                            <option value="5">5 - IC</option>
                            <option value="6">6 - IIA</option>
                            <option value="7">7 - IIB</option>
                            <option value="8">8 - IIC</option>
                            <option value="9">9 - IIIA</option>
                            <option value="10">10 - IIIB</option>
                            <option value="11">11 - IIIC</option>
                            <option value="12">12 - IVA</option>
                            <option value="13">13 - IVB</option>
                            <option value="14">14 - IVC</option>
                        </select>
                    </div>

                    <!-- Afectaci√≥n linfovascular -->
                    <div class="form-group">
                        <label for="afectacion_linf">Afectaci√≥n linfovascular</label>
                        <select id="afectacion_linf" name="afectacion_linf">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="0">No</option>
                            <option value="1">S√≠</option>
                        </select>
                    </div>

                    <!-- Met√°stasis a distancia -->
                    <div class="form-group">
                        <label for="metasta_distan">Met√°stasis a distancia</label>
                        <select id="metasta_distan" name="metasta_distan">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="0">No</option>
                            <option value="1">S√≠</option>
                        </select>
                    </div>

                    <!-- AP Centinela P√©lvico -->
                    <div class="form-group">
                        <label for="AP_centinela_pelvico">AP Centinela P√©lvico</label>
                        <select id="AP_centinela_pelvico" name="AP_centinela_pelvico">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="0">0 - Negativo (pN0)</option>
                            <option value="1">1 - C√©lulas tumorales aisladas (pN0(i+))</option>
                            <option value="2">2 - Micromet√°stasis (pN1(mi))</option>
                            <option value="3">3 - Macromet√°stasis (pN1)</option>
                            <option value="4">4 - pNx</option>
                        </select>
                    </div>

                    <!-- AP Ganglios P√©lvicos -->
                    <div class="form-group">
                        <label for="AP_ganPelv">AP Ganglios P√©lvicos</label>
                        <select id="AP_ganPelv" name="AP_ganPelv">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="0">0 - Negativo</option>
                            <option value="1">1 - C√©lulas tumorales aisladas</option>
                            <option value="2">2 - Micromet√°stasis</option>
                            <option value="3">3 - Macromet√°stasis</option>
                        </select>
                    </div>

                    <!-- AP Ganglios Para-a√≥rticos -->
                    <div class="form-group">
                        <label for="AP_glanPaor">AP Ganglios Para-a√≥rticos</label>
                        <select id="AP_glanPaor" name="AP_glanPaor">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="0">0 - Negativo</option>
                            <option value="1">1 - C√©lulas tumorales aisladas</option>
                            <option value="2">2 - Micromet√°stasis</option>
                            <option value="3">3 - Macromet√°stasis</option>
                        </select>
                    </div>

                    <!-- Beta-catenina -->
                    <div class="form-group">
                        <label for="beta_cateninap">Beta-catenina (Positividad nuclear)</label>
                        <select id="beta_cateninap" name="beta_cateninap">
                            <option value="">-- Seleccione o deje vac√≠o --</option>
                            <option value="0">0 - No</option>
                            <option value="1">1 - S√≠</option>
                            <option value="2">2 - No realizado</option>
                        </select>
                    </div>
                </div>

                <!-- Section: Variables desde biopsia preoperatoria -->
                <div class="form-section-title">
                    <span class="section-icon">üî¨</span>
                    Informaci√≥n Preoperatoria
                    <span class="section-subtitle">(Marque si el valor proviene de biopsia preoperatoria)</span>
                </div>

                <div class="checkbox-grid">
                    <div class="checkbox-option">
                        <input type="checkbox" id="histo_defin__from_pre" name="histo_defin__from_pre">
                        <label for="histo_defin__from_pre">Histolog√≠a desde biopsia preoperatoria</label>
                    </div>

                    <div class="checkbox-option">
                        <input type="checkbox" id="grado_histologi__from_pre" name="grado_histologi__from_pre">
                        <label for="grado_histologi__from_pre">Grado desde biopsia preoperatoria</label>
                    </div>

                    <div class="checkbox-option">
                        <input type="checkbox" id="FIGO2023__from_pre" name="FIGO2023__from_pre">
                        <label for="FIGO2023__from_pre">FIGO desde evaluaci√≥n preoperatoria</label>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="resetForm()">
                        <span>üîÑ</span> Limpiar formulario
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <span>‚ú®</span> Generar Perfil de Riesgo
                    </button>
                </div>
            </form>
        </section>

        <!-- Loading Section -->
        <section class="loading-section card" id="loadingSection" style="display: none;">
            <div class="loading-spinner"></div>
            <h2>Analizando perfil...</h2>
            <p>Procesando datos cl√≠nicos y calculando riesgo de supervivencia</p>
        </section>

        <!-- Result Section -->
        <section class="result-section" id="resultSection" style="display: none;">
            <!-- Results will be populated by JavaScript -->
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>Desarrollado con üíú para el proyecto BitsxMT25</p>
        <p><small>Esta herramienta es informativa y no sustituye la consulta m√©dica profesional.</small></p>
    </footer>

    <script src="js/calculator.js"></script>
    <script src="js/chatbox.js"></script>
</body>
</html>
